<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Green Fog Blob with Parallax</title>
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
      background: transparent;
      overflow: hidden;
    }

    canvas {
      display: block;
    }

    /* Image container: vertical column in center */
    #image {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
      gap: 2rem; /* base spacing */
      pointer-events: none;
      filter: url(#gooey);
    }

    


    /* Images in vertical trail */
    #image img {
      width: 12rem;
      height: 15rem;
      object-fit: cover;
      transition: transform 0.3s ease;
      /* Add random overlap look */
      margin-top: -9rem; 
    }

    /* Add some organic randomness using nth-child */
    #image img:nth-child(1) {
      transform: rotate(-4deg) translateX(-10px);
      z-index: 2;
    }
    #image img:nth-child(2) {
      transform: rotate(3deg) translateX(15px);
      z-index: 3;
      margin-top: -3rem;
    }
    #image img:nth-child(3) {
      transform: rotate(-6deg) translateX(-20px);
      z-index: 4;
    }
    #image img:nth-child(4) {
      transform: rotate(2deg) translateX(10px);
      z-index: 1;
      margin-top: -2rem;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
</head>

<body>
  <!-- Image trail -->
  <div id="image">
    <img src="./img/6b269c46ccec4a9d359175d34bfff978.jpg" alt="">
    <img src="./img/6f2a33d50e19e656c5d82288ec1b198c.jpg" alt="">
    <img src="./img/d2953ed9821f77cee650af7ea3c81390.jpg" alt="">
    <img src="./img/d71b4b2b1dc80746dd83b4d90404d7fd.jpg" alt="">
  </div>

  <!-- Vertex Shader -->
  <script id="vert" type="x-shader/x-vertex">
    void main() {
      gl_Position = vec4(position, 1.0);
    }
  </script>

  <!-- Fragment Shader -->
  <script id="frag" type="x-shader/x-fragment">
    precision highp float;

    uniform float u_time;
    uniform vec2  u_res;
    uniform vec2  u_mouse;

    vec3 mod289(vec3 x){return x - floor(x * (1.0/289.0)) * 289.0;}
    vec2 mod289(vec2 x){return x - floor(x * (1.0/289.0)) * 289.0;}
    vec3 permute(vec3 x){return mod289(((x*34.0)+1.0)*x);}
    float snoise(vec2 v){
      const vec4 C = vec4(0.211324865405187, 0.366025403784439,
                         -0.577350269189626, 0.024390243902439);
      vec2 i = floor(v + dot(v, C.yy));
      vec2 x0 = v - i + dot(i, C.xx);
      vec2 i1 = (x0.x > x0.y) ? vec2(1.0,0.0):vec2(0.0,1.0);
      vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1;
      i = mod289(i);
      vec3 p = permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));
      vec3 m = max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);
      m = m*m; m = m*m;
      vec3 x = 2.0*fract(p*C.w)-1.0;
      vec3 h = abs(x)-0.5;
      vec3 ox = floor(x+0.5);
      vec3 a0 = x-ox;
      m *= 1.79284291400159 - 0.85373472095314*(a0*a0+h*h);
      vec3 g;
      g.x = a0.x*x0.x+h.x*x0.y;
      g.y = a0.y*x12.x+h.y*x12.y;
      g.z = a0.z*x12.z+h.z*x12.w;
      return 130.0*dot(m,g);
    }

    float fbm(vec2 p){
      float f = 0.0, a = 0.5;
      for(int i=0;i<5;i++){
        f += a*snoise(p);
        p *= 2.0;
        a *= 0.5;
      }
      return f;
    }

    void main(){
      vec2 uv = (gl_FragCoord.xy - 0.5*u_res) / u_res.y;
      float t = u_time*0.05;

      uv += u_mouse * 0.010;
      uv.x *= 0.5;

      float d = length(uv*vec2(1.1,1.0));
      float edge = fbm(uv*3.0 + t);
      float mask = smoothstep(0.55, 0.25, d + edge*0.25);

      vec3 green = vec3(0.4, 0.9, 0.5);
      float intensity = 0.8 + 0.5 * fbm(uv*2.5 + t*0.5);
      vec3 color = green * intensity;

      color = mix(color, vec3(1.0), 0.15 * (1.0 - d));

      gl_FragColor = vec4(color, mask);
    }
  </script>

  <!-- Three.js + Shader Logic -->
  <script>
    (() => {
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(innerWidth, innerHeight);
      renderer.setClearColor(0x000000, 0);
      document.body.appendChild(renderer.domElement);

      const scene = new THREE.Scene();
      const camera = new THREE.Camera();

      const uniforms = {
        u_time: { value: 0 },
        u_res: { value: new THREE.Vector2(innerWidth, innerHeight) },
        u_mouse: { value: new THREE.Vector2(0.0, 0.0) }
      };

      const mat = new THREE.ShaderMaterial({
        uniforms,
        vertexShader: document.getElementById("vert").textContent,
        fragmentShader: document.getElementById("frag").textContent,
        transparent: true
      });

      scene.add(new THREE.Mesh(new THREE.PlaneGeometry(2, 2), mat));

      let start = performance.now();
      function animate(now) {
        uniforms.u_time.value = (now - start) * 0.001;
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
      }
      animate();

      addEventListener("resize", () => {
        renderer.setSize(innerWidth, innerHeight);
        uniforms.u_res.value.set(innerWidth, innerHeight);
      });

      document.addEventListener("mousemove", (e) => {
        uniforms.u_mouse.value.x = (e.clientX / innerWidth - 0.5);
        uniforms.u_mouse.value.y = -(e.clientY / innerHeight - 0.5);
      });
    })();
  </script>



<svg width="0" height="0">
  <filter id="gooey">
    <feGaussianBlur in="SourceGraphic" stdDeviation="15" result="blur" />
    <feColorMatrix in="blur" mode="matrix"
      values="1 0 0 0 0
              0 1 0 0 0
              0 0 1 0 0
              0 0 0 25 -10" result="gooey" />
    <feComposite in="SourceGraphic" in2="gooey" operator="atop"/>
  </filter>
</svg>

</body>
</html>
